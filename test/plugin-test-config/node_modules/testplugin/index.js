module.exports = function (app) {
  return {
    id: 'testplugin',
    name: 'Test Plugin Name',
    schema: function () {
      return {
        type: 'object',
        properties: {}
      }
    },
    start: function () {
      app.debug('Demoing debug logging')
      app.error('Demoing error diagnostics')
      this.started = true

      app.handleMessage(this.id, {
        updates: [
          {
            values: [
              {
                path: 'some.path',
                value: 'someValue'
              }
            ]
          }
        ]
      })

      app.registerDeltaInputHandler((delta, next) => {
        if (delta.updates[0].values[0].path === 'navigation.courseOverGroundTrue') {
          delta.updates[0].values[0].value = -1
        }
        next(delta)
      })
    },
    stop: function () {
      this.started = false
    },
    app: app
  }
}
